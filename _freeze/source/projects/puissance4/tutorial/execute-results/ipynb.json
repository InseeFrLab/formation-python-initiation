{
  "hash": "270883b286d0c607f3a67afdb05f1f17",
  "result": {
    "markdown": "---\ntitle: \"Projet 1 - Puissance 4\"\nabstract: \"Un projet de code pour mettre en pratique les éléments fondamentaux de Python : structures de données, boucles, fonctions, conditions.\"\nexecute:\n    echo: true\n    eval: false\n---\n\nDans ce projet nous allons implémenter un puissance 4 avec une interface graphique assez sommaire. Pour y arriver, nous allons utiliser les objets fondamentaux de Python.\n\n::: {#1b03d382 .cell execution_count=1}\n``` {.python .cell-code}\nimport copy\n\nimport solutions\n```\n:::\n\n\n## Règles du jeu\n\nLe but du jeu de Puissance 4 est d'aligner une suite de 4 pions de même couleur sur une grille comptant 6 rangées et 7 colonnes. Chaque joueur dispose de 21 pions d'une couleur (par convention, en général jaune ou rouge). Tour à tour, les deux joueurs placent un pion dans la colonne de leur choix, le pion coulisse alors jusqu'à la position la plus basse possible dans la dite colonne à la suite de quoi c'est à l'adversaire de jouer. Le vainqueur est le joueur qui réalise le premier un alignement (horizontal, vertical ou diagonal) consécutif d'au moins quatre pions de sa couleur. Si, alors que toutes les cases de la grille de jeu sont remplies, aucun des deux joueurs n'a réalisé un tel alignement, la partie est déclarée nulle.\n\nAfin de simplifier le code de ce projet, on partira du principe que les alignements victorieux ne peuvent être qu'horizontaux ou verticaux. Les diagonales ne seront donc pas considérées (mais constituent un exercice intéressant pour aller plus loin !).\n\n## Plan du projet\n\nNous allons décomposer la construction du jeu en différentes parties :\n- initialisation de la grille\n- représentation de la grille\n- fonction de jeu\n- détection d'une victoire (horizontale)\n- détection d'une victoire (verticale)\n- fin de partie\n\n## Initialisation de la grille\n\nL'objectif de cette partie est d'initialiser un objet Python qui représente une grille de puissance 4. Le choix que nous allons faire est de **représenter la grille comme une liste de listes**. Il s'agira d'une matrice 6x7 : on aura par conséquent une **liste de 6 élements** (qui représenteront les lignes de la grille), dont chacun des éléments sera une **liste contenant 7 éléments** (qui représenterons les pions). \n\nChaque élément de la grille sera représenté par un *string*, qui pourra prendre trois valeurs :\n- ' ' : s'il s'agit d'une case vide\n- 'R' : s'il s'agit d'un pion rouge. \n- 'J' : s'il s'agit d'un pion jaune. \n\nDans la fonction d'initialisation de la grille, chaque élément sera donc initialisé comme un ***string* contenant un espace**.\n\n**Attention** : Bien faire attention à ce que les lignes soient des objets indépendants, autrement dit que modifier l'une des listes n'affecte pas les autres.\n\n### Résultat attendu\n\n::: {#c2bd1dfe .cell execution_count=2}\n``` {.python .cell-code}\ngrille = solutions.initialise_grille()\ngrille\n```\n:::\n\n\n::: {#4d79ea0b .cell execution_count=3}\n``` {.python .cell-code}\nprint(f'Nombre de lignes : {len(grille)}')\nprint(f'Nombre de colonnes : {len(grille[0])}')\n```\n:::\n\n\n### A vous de jouer !\n\n::: {#88f7b7d1 .cell execution_count=4}\n``` {.python .cell-code}\ndef initialise_grille():\n    # Votre code ici\n    return grille\n```\n:::\n\n\n::: {#b847096f .cell execution_count=5}\n``` {.python .cell-code}\n# Vérification du résultat\ngrille = initialise_grille()\ngrille\n```\n:::\n\n\n::: {#52d5e68c .cell execution_count=6}\n``` {.python .cell-code}\n# Vérification du résultat\nprint(f'Nombre de lignes : {len(grille)}')\nprint(f'Nombre de colonnes : {len(grille[0])}')\n```\n:::\n\n\n## Représentation de la grille\n\nNotre grille est initialisée, mais son affichage est assez sommaire. L'idée de cette partie est d'offrir une représentation plus visuelle du jeu pendant une partie.\n\nPour cela, nous allons créer **une fonction qui prend en entrée la grille précédemment initialisée et renvoie sa représentation** (via la fonction `print`). Les colonnes seront séparées par le caractère | (barre verticale).\n\n**Indice** : une solution possible fait intervenir deux notions que nous avons vues dans les TP précédents : la concaténation de *strings* et la fonction `join` qui \"joint\" les éléments d'une liste en les séparant par un certain caractère. Pour rappel, voici un exemple qui utilise ces deux concepts : \n\n::: {#9bab0832 .cell execution_count=7}\n``` {.python .cell-code}\nl = [\"a\", \"b\", \"c\", \"d\", \"e\"]\nl_join = \"DEBUT \" + \", \".join(l) + \" FIN\"\nprint(l_join)\n```\n:::\n\n\n### Résultat attendu\n\n::: {#e9814b38 .cell execution_count=8}\n``` {.python .cell-code}\nsolutions.affiche_grille(grille)\n```\n:::\n\n\n### A vous de jouer !\n\n::: {#cd38cfb3 .cell execution_count=9}\n``` {.python .cell-code}\ndef affiche_grille():\n    # Votre code ici\n```\n:::\n\n\n::: {#75adb090 .cell execution_count=10}\n``` {.python .cell-code}\n# Vérification du résultat\naffiche_grille(grille)\n```\n:::\n\n\n## Fonction de jeu\n\nMaintenant que nous pouvons représenter notre grille, intéressons-nous au coeur du puissance 4 : le jeu. L'objectif de cette partie est de **coder une fonction `tour` qui va modifier la grille lorsqu'un joueur joue son tour**.\n\nCette fonction prend en entrée :\n- la grille\n- la colonne choisie par le joueur\n- la couleur du pion ('R' pour le pion rouge, et 'J' pour le pion jaune)\n\net renvoie en sortie la grille actualisée suite au tour du joueur.\n\nSi la colonne choisie est déjà complète, renvoyer un message d'erreur.\n\n**Attention** : en Python, la numérotation commence à 0. La première colonne correspond donc à la colonne 0 du point de vue de l'indexation.\n\nOptionnel : Renvoyer un message d'erreur si un joueur essaie de jouer dans une colonne inexistante ou bien avec une couleur non autorisée.\n\n### Résultat attendu\n\n::: {#010bc6cc .cell execution_count=11}\n``` {.python .cell-code}\ngrille = solutions.initialise_grille()  # Initialisation\ngrille = solutions.tour(grille=grille, colonne_a_jouer=2, couleur_pion=\"R\")  # 1er tour de jeu\ngrille = solutions.tour(grille=grille, colonne_a_jouer=5, couleur_pion=\"J\")  # 2ème tour de jeu\ngrille = solutions.tour(grille=grille, colonne_a_jouer=2, couleur_pion=\"R\")  # 3ème tour de jeu\nsolutions.affiche_grille(grille)\n```\n:::\n\n\n### A vous de jouer !\n\n::: {#2ba7b332 .cell execution_count=12}\n``` {.python .cell-code}\ndef tour(grille, colonne_a_jouer, couleur_pion):\n    new_grille = copy.deepcopy(grille)  # Evite la modification de la grille initiale\n    # Votre code ici\n    return new_grille\n```\n:::\n\n\n::: {#a846d6e7 .cell execution_count=13}\n``` {.python .cell-code}\n# Vérification du résultat\ngrille = initialise_grille()  # Initialisation\ngrille = tour(grille=grille, colonne_a_jouer=2, couleur_pion=\"R\")  # 1er tour de jeu\ngrille = tour(grille=grille, colonne_a_jouer=5, couleur_pion=\"J\")  # 2ème tour de jeu\ngrille = tour(grille=grille, colonne_a_jouer=2, couleur_pion=\"R\")  # 3ème tour de jeu\naffiche_grille(grille)\n```\n:::\n\n\n## Détection d'une victoire (horizontale)\n\nMaintenant qu'il est possible de jouer effectivement à notre puissance 4, il faut pouvoir détecter une victoire pour mettre fin à la partie en cours. Pour se faire, on va simplifier le problème en le décomposant au maximum.\n\nDans un premier temps, on s'intéresse à la détection d'une victoire horizontale. Pour cela, on va s'aider de deux fonctions :\n- une fonction `victoire_ligne` qui prend en entrée une ligne du puissance 4 (i.e. une liste de taille 7) et retourne `True` si jamais 4 pions consécutifs de même couleur se trouvent sur la ligne, et `False` sinon\n- une fonction `victoire_horizontale_grille` qui prend en entrée une grille complète et retourne `True` si jamais une ligne de la grille remplit la condition précédente, et `False` sinon\n\n### Résultat attendu\n\n::: {#b0f4779d .cell execution_count=14}\n``` {.python .cell-code}\n# Détection d'une victoire (horizontale) sur une ligne\nligne1 = [\" \", \"R\", \"R\", \"R\", \"J\", \"J\", \" \"]\nligne2 = [\" \", \"R\", \"R\", \"R\", \"R\", \"J\", \" \"]\n\nprint(solutions.victoire_ligne(ligne1))  # Renvoie False\nprint()  # Retour à la ligne\nprint(solutions.victoire_ligne(ligne2))  # Renvoie True\n```\n:::\n\n\n::: {#87888f27 .cell execution_count=15}\n``` {.python .cell-code}\n# Détection d'une victoire (horizontale) sur une grille\ngrille = solutions.initialise_grille()  # Initialisation\nprint(solutions.victoire_horizontale_grille(grille))  # Renvoie False\nprint()  # Retour à la ligne\n\ngrille = solutions.tour(grille=grille, colonne_a_jouer=2, couleur_pion=\"R\")\ngrille = solutions.tour(grille=grille, colonne_a_jouer=3, couleur_pion=\"R\")\ngrille = solutions.tour(grille=grille, colonne_a_jouer=4, couleur_pion=\"R\")\ngrille = solutions.tour(grille=grille, colonne_a_jouer=5, couleur_pion=\"R\")\nsolutions.affiche_grille(grille)\nprint()  # Retour à la ligne\n\nprint(solutions.victoire_horizontale_grille(grille))  # Renvoie True\n```\n:::\n\n\n### A vous de jouer !\n\n::: {#1c348510 .cell execution_count=16}\n``` {.python .cell-code}\ndef victoire_ligne(ligne):\n    # Votre code ici\n```\n:::\n\n\n::: {#ee3a250b .cell execution_count=17}\n``` {.python .cell-code}\n# Vérification du résultat\nligne1 = [\" \", \"R\", \"R\", \"R\", \"J\", \"R\", \" \"]\nligne2 = [\" \", \"R\", \"R\", \"R\", \"R\", \"J\", \" \"]\n\nprint(victoire_ligne(ligne1))  # Renvoie False\nprint(victoire_ligne(ligne2))  # Renvoie True\n```\n:::\n\n\n::: {#560ee993 .cell execution_count=18}\n``` {.python .cell-code}\ndef victoire_horizontale_grille(grille):\n    # Votre code ici\n```\n:::\n\n\n::: {#c64e09da .cell execution_count=19}\n``` {.python .cell-code}\n# Vérification du résultat\ngrille = initialise_grille()  # Initialisation\nprint(victoire_horizontale_grille(grille))  # Renvoie False\n\ngrille = tour(grille=grille, colonne_a_jouer=2, couleur_pion=\"R\")\ngrille = tour(grille=grille, colonne_a_jouer=3, couleur_pion=\"R\")\ngrille = tour(grille=grille, colonne_a_jouer=4, couleur_pion=\"R\")\ngrille = tour(grille=grille, colonne_a_jouer=5, couleur_pion=\"R\")\naffiche_grille(grille)\nprint(victoire_horizontale_grille(grille))  # Renvoie True\n```\n:::\n\n\n## Détection d'une victoire (verticale)\n\nA présent, on s'intéresse à la détection d'une victoire verticale. Par rapport à la situation précédente, la difficulté est que l'on ne peut pas directement boucler sur les colonnes. On va donc construire une fonction `victoire_verticale_grille` qui, pour chaque colonne :\n- récupère les éléments de la colonne dans une liste\n- applique à cette liste la fonction `victoire_ligne` pour vérifier la présence de 4 pions consécutifs de même couleur dans la colonne considérée\n\n### Résultat attendu\n\n::: {#bf95a499 .cell execution_count=20}\n``` {.python .cell-code}\n# Détection d'une victoire (verticale) sur une grille\ngrille = solutions.initialise_grille()  # Initialisation\nprint(solutions.victoire_verticale_grille(grille))  # Renvoie False\nprint()  # Retour à la ligne\n\ngrille = solutions.tour(grille=grille, colonne_a_jouer=2, couleur_pion=\"J\")\ngrille = solutions.tour(grille=grille, colonne_a_jouer=2, couleur_pion=\"J\")\ngrille = solutions.tour(grille=grille, colonne_a_jouer=2, couleur_pion=\"J\")\ngrille = solutions.tour(grille=grille, colonne_a_jouer=2, couleur_pion=\"J\")\nsolutions.affiche_grille(grille)\nprint()  # Retour à la ligne\n\nprint(solutions.victoire_verticale_grille(grille))  # Renvoie True\n```\n:::\n\n\n### A vous de jouer !\n\n::: {#eb224a60 .cell execution_count=21}\n``` {.python .cell-code}\ndef victoire_verticale_grille(grille):\n    # Votre code ici\n```\n:::\n\n\n::: {#3e0545c2 .cell execution_count=22}\n``` {.python .cell-code}\n# Vérification du résultat\ngrille = initialise_grille()  # Initialisation\nprint(victoire_verticale_grille(grille))  # Renvoie False\nprint()  # Retour à la ligne\n\ngrille = tour(grille=grille, colonne_a_jouer=2, couleur_pion=\"J\")\ngrille = tour(grille=grille, colonne_a_jouer=2, couleur_pion=\"J\")\ngrille = tour(grille=grille, colonne_a_jouer=2, couleur_pion=\"J\")\ngrille = tour(grille=grille, colonne_a_jouer=2, couleur_pion=\"J\")\naffiche_grille(grille)\nprint()  # Retour à la ligne\n\nprint(victoire_verticale_grille(grille))  # Renvoie True\n```\n:::\n\n\n## Fin de partie\n\nDans notre version simplifiée du puissance 4, on peut à présent déclarer la **fin de partie : dès lors qu'une victoire horizontale ou verticale est détectée**.\n\nOn va donc pour commencer créer une fonction `victoire` qui prend la grille en entrée et renvoie `True` si une victoire horizontale **ou** verticale est détectée, et `False` sinon.\n\nDans l'idéal, on voudrait ne pas avoir à tester manuellement après chaque coup si la partie est terminée afin de limiter la duplication de code. On va donc ensuite créer une fonction `tour_test_victoire` qui :\n- prend en entrée les mêmes *inputs* que la fonction `tour`\n- va appeler la fonction `tour` pour réaliser le tour de jeu\n- va tester après le tour de jeu si une victoire est détectée via la fonction `victoire`. Si une victoire est détectée, la fonction imprime \"FIN DE PARTIE\".\n\n### Résultat attendu\n\n::: {#a554a003 .cell execution_count=23}\n``` {.python .cell-code}\ngrille = solutions.initialise_grille()  # Initialisation\nprint(\"Tour 1\")\ngrille = solutions.tour_test_victoire(grille=grille, colonne_a_jouer=2, couleur_pion=\"J\")\nprint(\"Tour 2\")\ngrille = solutions.tour_test_victoire(grille=grille, colonne_a_jouer=2, couleur_pion=\"J\")\nprint(\"Tour 3\")\ngrille = solutions.tour_test_victoire(grille=grille, colonne_a_jouer=2, couleur_pion=\"J\")\nprint(\"Tour 4\")\ngrille = solutions.tour_test_victoire(grille=grille, colonne_a_jouer=2, couleur_pion=\"J\")\n```\n:::\n\n\n### A vous de jouer !\n\n::: {#5c78c664 .cell execution_count=24}\n``` {.python .cell-code}\ndef victoire(grille):\n    # Votre code ici\n```\n:::\n\n\n::: {#26c55165 .cell execution_count=25}\n``` {.python .cell-code}\ndef tour_test_victoire(grille, colonne_a_jouer, couleur_pion):\n    grille = copy.deepcopy(grille)\n    # Votre code ici\n    return grille\n```\n:::\n\n\n::: {#063ee28b .cell execution_count=26}\n``` {.python .cell-code}\n# Vérification du résultat\ngrille = initialise_grille()  # Initialisation\nprint(\"Tour 1\")\ngrille = tour_test_victoire(grille=grille, colonne_a_jouer=2, couleur_pion=\"J\")\nprint(\"Tour 2\")\ngrille = tour_test_victoire(grille=grille, colonne_a_jouer=2, couleur_pion=\"J\")\nprint(\"Tour 3\")\ngrille = tour_test_victoire(grille=grille, colonne_a_jouer=2, couleur_pion=\"J\")\nprint(\"Tour 4\")\ngrille = tour_test_victoire(grille=grille, colonne_a_jouer=2, couleur_pion=\"J\")\n```\n:::\n\n\n---\njupyter:\n  kernelspec:\n    display_name: Python 3 (ipykernel)\n    language: python\n    name: python3\n  language_info:\n    codemirror_mode:\n      name: ipython\n      version: 3\n    file_extension: .py\n    mimetype: text/x-python\n    name: python\n    nbconvert_exporter: python\n    pygments_lexer: ipython3\n    version: 3.11.4\n---\n",
    "supporting": [
      "tutorial_files"
    ],
    "filters": []
  }
}