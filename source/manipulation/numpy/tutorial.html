<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Formation SSPy  - Calcul numérique avec NumPy</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="../../../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../../../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../../styles.css">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../../source/manipulation/modules-files/tutorial.html">Manipulation de données</a></li><li class="breadcrumb-item"><a href="../../../source/manipulation/numpy/tutorial.html">Calcul numérique avec NumPy</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../../../">Formation SSPy <i class="fa-brands fa-python" aria-label="python"></i></a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Fondamentaux du langage</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../source/fundamentals/types-variables/tutorial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Types de base et variables</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../source/fundamentals/data-structures1/tutorial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Structures de données 1 : listes et tuples</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../source/fundamentals/data-structures2/tutorial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Structures de données 2 : dictionnaires et sets</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../source/fundamentals/tests/tutorial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tests</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../source/fundamentals/loops/tutorial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Boucles</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../source/fundamentals/functions/tutorial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Fonctions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../source/fundamentals/oop/tutorial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Notions de programmation orientée objet</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Manipulation de données</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../source/manipulation/modules-files/tutorial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Manipulation de fichiers</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../source/manipulation/csv-json-files/tutorial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Travailler avec des fichiers CSV et JSON</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../source/manipulation/numpy/tutorial.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Calcul numérique avec NumPy</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../source/manipulation/pandas/tutorial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Traiter des données tabulaires avec Pandas</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../source/manipulation/dataviz/tutorial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction à la visualisation de données</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Projets</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../source/projects/puissance4/tutorial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Projet 1 - Puissance 4</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../source/projects/meteo/tutorial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Projet 2 - Interaction avec des APIs</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../source/projects/RP/tutorial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Projet 3 - Analyse du recensement de la population</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#numpy" id="toc-numpy" class="nav-link active" data-scroll-target="#numpy">NumPy</a>
  <ul class="collapse">
  <li><a href="#pourquoi-utiliser-numpy" id="toc-pourquoi-utiliser-numpy" class="nav-link" data-scroll-target="#pourquoi-utiliser-numpy">Pourquoi utiliser NumPy ?</a></li>
  <li><a href="#les-array-numpy" id="toc-les-array-numpy" class="nav-link" data-scroll-target="#les-array-numpy">Les <em>array</em> NumPy</a></li>
  <li><a href="#opérations-mathématiques" id="toc-opérations-mathématiques" class="nav-link" data-scroll-target="#opérations-mathématiques">Opérations mathématiques</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  </ul></li>
  <li><a href="#exercices" id="toc-exercices" class="nav-link" data-scroll-target="#exercices">Exercices</a>
  <ul class="collapse">
  <li><a href="#questions-de-compréhension" id="toc-questions-de-compréhension" class="nav-link" data-scroll-target="#questions-de-compréhension">Questions de compréhension</a></li>
  <li><a href="#exercice-plusieurs-manières-de-créer-un-dataframe" id="toc-exercice-plusieurs-manières-de-créer-un-dataframe" class="nav-link" data-scroll-target="#exercice-plusieurs-manières-de-créer-un-dataframe">Exercice : plusieurs manières de créer un DataFrame</a></li>
  <li><a href="#exercice-manipulations-simples-des-données-dun-dataframe" id="toc-exercice-manipulations-simples-des-données-dun-dataframe" class="nav-link" data-scroll-target="#exercice-manipulations-simples-des-données-dun-dataframe">Exercice : manipulations simples des données d’un DataFrame</a></li>
  <li><a href="#exercice-sélectionner-des-éléments-dans-une-matrice" id="toc-exercice-sélectionner-des-éléments-dans-une-matrice" class="nav-link" data-scroll-target="#exercice-sélectionner-des-éléments-dans-une-matrice">Exercice : sélectionner des éléments dans une matrice</a></li>
  <li><a href="#exercice-un-peu-de-calcul" id="toc-exercice-un-peu-de-calcul" class="nav-link" data-scroll-target="#exercice-un-peu-de-calcul">Exercice : un peu de calcul</a></li>
  <li><a href="#exercice-initialisation-darrays-de-diverses-natures" id="toc-exercice-initialisation-darrays-de-diverses-natures" class="nav-link" data-scroll-target="#exercice-initialisation-darrays-de-diverses-natures">Exercice : initialisation d’<em>arrays</em> de diverses natures</a></li>
  <li><a href="#exercice-tirage-dun-vecteur-selon-une-loi-normale" id="toc-exercice-tirage-dun-vecteur-selon-une-loi-normale" class="nav-link" data-scroll-target="#exercice-tirage-dun-vecteur-selon-une-loi-normale">Exercice : tirage d’un vecteur selon une loi normale</a></li>
  <li><a href="#exercice-tirage-dune-matrice-selon-une-loi-uniforme" id="toc-exercice-tirage-dune-matrice-selon-une-loi-uniforme" class="nav-link" data-scroll-target="#exercice-tirage-dune-matrice-selon-une-loi-uniforme">Exercice : tirage d’une matrice selon une loi uniforme</a></li>
  <li><a href="#exercice-binariser-une-matrice-de-nombres" id="toc-exercice-binariser-une-matrice-de-nombres" class="nav-link" data-scroll-target="#exercice-binariser-une-matrice-de-nombres">Exercice : binariser une matrice de nombres</a></li>
  <li><a href="#exercice-touché-coulé" id="toc-exercice-touché-coulé" class="nav-link" data-scroll-target="#exercice-touché-coulé">Exercice : touché-coulé</a></li>
  <li><a href="#exercice-one-hot-encoding" id="toc-exercice-one-hot-encoding" class="nav-link" data-scroll-target="#exercice-one-hot-encoding">Exercice : One Hot Encoding</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../../source/manipulation/modules-files/tutorial.html">Manipulation de données</a></li><li class="breadcrumb-item"><a href="../../../source/manipulation/numpy/tutorial.html">Calcul numérique avec NumPy</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Calcul numérique avec NumPy</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>En tant que statisticien, on est fréquemment amené à manipuler des séries de valeurs numériques, à partir desquelles on réalise diverses opérations mathématiques, des plus usuelles (moyenne, variance, etc.) aux plus complexes. On peut, comme on l’a fait dans les précédents tutoriels, utiliser les objets fondamentaux de Python, et en particulier les listes, pour réaliser de telles opérations. En pratique, on préférera utiliser la <strong>librairie de référence pour le calcul scientifique</strong>, <code>NumPy</code>, qui fournit à la fois des objets (les <strong><em>arrays</em></strong>) et des fonctions qui vont grandement nous simplifier la vie pour effectuer tous nos calculs en Python de manière efficiente.</p>
<section id="numpy" class="level2">
<h2 class="anchored" data-anchor-id="numpy">NumPy</h2>
<p>On commence par importer la librairie <code>NumPy</code>. Comme expliqué dans un précédent tutoriel, l’usage est courant est de lui attribuer l’alias <code>np</code>.</p>
<div id="98ab10c5" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="pourquoi-utiliser-numpy" class="level3">
<h3 class="anchored" data-anchor-id="pourquoi-utiliser-numpy">Pourquoi utiliser NumPy ?</h3>
<p>Plutôt que de présenter de manière abstraite les avantages de <code>NumPy</code>, illustrons ces derniers à travers un exemple simple : la multiplication terme à terme de deux vecteurs.</p>
<p>On génère deux vecteurs contenant les entiers allant de <span class="math inline">\(0\)</span> à <span class="math inline">\(99999\)</span>, que l’on multiplie terme à terme. On effectue cela d’abord via les listes Python (fonction <code>mult_list</code>), puis à l’aide de <code>NumPy</code> (fonction <code>mult_np</code>), et on compare les performances des deux méthodes.</p>
<div id="51613242" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> mult_list(n):</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    a <span class="op">=</span> <span class="bu">range</span>(n)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    b <span class="op">=</span> <span class="bu">range</span>(n)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    c <span class="op">=</span> []</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(a)):</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>        mult <span class="op">=</span> a[i] <span class="op">*</span> b[i]</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>        c.append(mult)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> c</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> mult_np(n):</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    a_np <span class="op">=</span> np.arange(n)</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>    b_np <span class="op">=</span> np.arange(n)</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>    c_np <span class="op">=</span> a_np <span class="op">*</span> b_np</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> c_np</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="28fb6884" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> <span class="dv">100000</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="ac800617" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Vérification de la cohérence sur les 10 premiers éléments</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(mult_list(n)[:<span class="dv">10</span>])</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(mult_np(n)[:<span class="dv">10</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[0, 1, 4, 9, 16, 25, 36, 49, 64, 81]
[ 0  1  4  9 16 25 36 49 64 81]</code></pre>
</div>
</div>
<div id="f5e7c692" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>timeit <span class="op">-</span>n10</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>mult_list(n)  <span class="co"># Performance de la méthode liste</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>18.1 ms ± 73.6 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)</code></pre>
</div>
</div>
<div id="3112cb82" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>timeit <span class="op">-</span>n10</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>mult_np(n)  <span class="co"># Performance de la méthode NumPy</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>116 µs ± 13.7 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)</code></pre>
</div>
</div>
<p>Cet exemple illustre à lui seul les principaux avantages de <code>NumPy</code> pour le calcul scientifique :</p>
<ul>
<li><p>les calculs sont <strong>vectorisés</strong> : multiplier deux <em>arrays</em> va naturellement effectuer la multiplication terme à terme, contrairement aux listes qui ne permettent pas cette opération. Les personnes travaillant avec <code>R</code> retrouveront là une propriété familière et bien pratique.</p></li>
<li><p>conséquence de la vectorisation, <strong>la syntaxe est plus légère et plus claire</strong> : on voit directement l’opération qui est effectuée et on limite ainsi les risques d’erreur ;</p></li>
<li><p>les calculs sont automatiquement <strong>optimisés</strong> par <code>NumPy</code> (via l’appel à du code <code>C</code> pré-compilé), réduisant très largement le temps mis par les opérations mathématiques (divisé par un facteur 10 dans notre exemple).</p></li>
</ul>
</section>
<section id="les-array-numpy" class="level3">
<h3 class="anchored" data-anchor-id="les-array-numpy">Les <em>array</em> NumPy</h3>
<section id="définition" class="level4">
<h4 class="anchored" data-anchor-id="définition">Définition</h4>
<p>Toute la librairie <code>NumPy</code> est basée sur un objet fondamental : l’<em>array</em>. Un <em>array</em> est un objet qui contient une séquence de données, et présente deux caractéristiques principales :</p>
<ul>
<li><p>les données contenues dans un <em>array</em> doivent être de <strong>type homogène</strong>, là où une même liste peut contenir des objets de différente nature ;</p></li>
<li><p>un <em>array</em> a une <strong>taille fixée</strong> à sa création, là où une liste peut grandir dynamiquement (en ajoutant des éléments via la méthode <code>append</code> par exemple).</p></li>
</ul>
<p>Ce sont en grande partie ces deux contraintes qui rendent possible les gains de performance et la syntaxe lisible qu’offre <code>NumPy</code>.</p>
</section>
<section id="création" class="level4">
<h4 class="anchored" data-anchor-id="création">Création</h4>
<p>Il existe différentes manières de créer un <em>array</em>. La plus standard est de convertir une liste en <em>array</em> via la fonction <em>array</em> de <code>NumPy</code>.</p>
<div id="0cc0713e" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>l <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> np.array(l)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1 2 3]</code></pre>
</div>
</div>
<p>A première vue, la fonction <code>print</code> renvoie une représentation identique à celle d’une liste. Vérifions le type de notre objet.</p>
<div id="8eb4a377" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<pre><code>numpy.ndarray</code></pre>
</div>
</div>
<p>L’objet est de type <code>ndarray</code>, qui est le type standard correspondant à un <em>array</em> <code>NumPy</code>.</p>
<p>On a vu qu’un <em>array</em> avait pour propriété de contenir des données de type homogène ; en l’occurrence, des entiers. On peut vérifier le type des données contenues via l’attribut <code>dtype</code> d’un <em>array</em>.</p>
<div id="57f864ed" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>a.dtype</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">
<pre><code>dtype('int64')</code></pre>
</div>
</div>
<p>Même si <code>NumPy</code> est avant tout une librairie dédiée au calcul numérique, il reste tout à fait possible de définir des <code>arrays</code> contenant des chaînes de caractères.</p>
<div id="478ba6bb" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> np.array([<span class="st">'1'</span>, <span class="st">'tigre'</span>])</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>b.dtype</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<pre><code>dtype('&lt;U5')</code></pre>
</div>
</div>
<p>Le <code>dtype</code> par défaut des <code>arrays</code> contenant des chaînes de caractères est un peu particulier, mais cela n’a pas d’importance en pratique. Retenez simplement sa forme.</p>
<p>Enfin, question importante : que se passe-t-il si l’on essaie de définir un <em>array</em> contenant des objets de types hétérogènes ?</p>
<div id="e05320e1" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>c <span class="op">=</span> np.array([<span class="dv">1</span>, <span class="dv">2</span>, <span class="st">'3'</span>])</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(c)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(c.dtype)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['1' '2' '3']
&lt;U21</code></pre>
</div>
</div>
<p>Réponse : tous les objets sont convertis en chaîne de caractères par défaut.</p>
</section>
<section id="dimension" class="level4">
<h4 class="anchored" data-anchor-id="dimension">Dimension</h4>
<p>Les <em>array</em> correspondent en fait à des tableaux de données, c’est à dire qu’ils peuvent être uni- ou multi-dimensionnels. Un <em>array</em> de dimension 1 ressemble à un vecteur (ou une liste), un <em>array</em> de dimension 2 ressemble à une matrice, et ainsi de suite.</p>
<p>On peut afficher le nombre de dimensions d’un <em>array</em> via l’attribut <code>ndim</code>.</p>
<div id="521c2ea4" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>c <span class="op">=</span> np.array([<span class="dv">1</span>, <span class="dv">2</span>, <span class="st">'3'</span>])</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>c.ndim</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">
<pre><code>1</code></pre>
</div>
</div>
<p>De la même manière que l’on a créé un <em>array</em> de dimension 1 à partir d’une liste simple, on peut créer un <em>array</em> multi-dimensionnel à partir d’une liste de listes.</p>
<div id="8887d34c" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>d <span class="op">=</span> np.array([[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>], [<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>]])</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(d)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1 2 3]
 [4 5 6]]</code></pre>
</div>
</div>
<p>On a converti une liste contenant 2 sous-listes à 3 éléments chacune, ce qui donne un <em>array</em> à deux dimensions. Notons que l’appel de <code>print</code> affiche une matrice à deux lignes et trois colonnes.</p>
<div id="46fe4c9c" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>d.ndim</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="14">
<pre><code>2</code></pre>
</div>
</div>
<p>On a bien affaire à un <em>array</em> à deux dimensions. Mais en pratique, lorsqu’on manipule des <code>arrays</code> multidimensionnels, on a aussi envie de connaître la <em>taille</em> de chacune des dimensions. En dimension 2, c’est le nombre de lignes et de colonnes. Pour cela, on utilise la méthode <code>shape</code>, qui renvoie un <em>tuple</em> contenant les tailles des différentes dimensions.</p>
<div id="ed2bba2a" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>d.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="15">
<pre><code>(2, 3)</code></pre>
</div>
</div>
<p>Le premier chiffre donne le nombre de lignes, le second le nombre de colonnes. On reviendra par la suite sur l’ordre des dimensions à travers la notion d’<em>axis</em>.</p>
</section>
<section id="indexation" class="level4">
<h4 class="anchored" data-anchor-id="indexation">Indexation</h4>
<p>On accède aux différents éléments d’un <em>array</em> de dimension 1 exactement de la même manière que ceux d’une liste.</p>
<div id="d27b3d66" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> np.array([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>])</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a)</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>()</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a[<span class="dv">1</span>])</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>()</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a[<span class="dv">2</span>:<span class="dv">5</span>])</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>()</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a[<span class="op">-</span><span class="dv">2</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1 2 3 4 5 6]

2

[3 4 5]

5</code></pre>
</div>
</div>
<p>Pour un <em>array</em> multidimensionnel, il faut spécifier le ou les éléments voulus sur chacune des dimensions de l’<em>array</em>, en les séparant par des virgules.</p>
<div id="07cac47e" class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> np.array([[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>], [<span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>], [<span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>]])</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(b)</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>()</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(b[<span class="dv">1</span>, <span class="dv">3</span>])</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>()</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(b[<span class="dv">1</span>:<span class="dv">3</span>, <span class="dv">1</span>:<span class="dv">3</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[ 1  2  3  4]
 [ 5  6  7  8]
 [ 9 10 11 12]]

8

[[ 6  7]
 [10 11]]</code></pre>
</div>
</div>
<p>Pour accéder à une ligne complète, on peut utiliser <code>:</code> sur la dimension des colonnes pour spécifier : “toutes les colonnes”. Et inversement pour récupérer une colonne complète.</p>
<div id="f49bf0b7" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(b[<span class="dv">1</span>,:])</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>()</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(b[:,<span class="dv">2</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[5 6 7 8]

[ 3  7 11]</code></pre>
</div>
</div>
</section>
<section id="modification-déléments" class="level4">
<h4 class="anchored" data-anchor-id="modification-déléments">Modification d’éléments</h4>
<p>Les éléments d’un <em>array</em> peuvent être modifiés. On combine pour cela la syntaxe d’indexation vue précédemment avec l’opérateur d’assignation <code>=</code>.</p>
<div id="9afa9ee8" class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> np.array([[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>], [<span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>], [<span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>]])</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>b[<span class="dv">1</span>, <span class="dv">1</span>] <span class="op">=</span> <span class="dv">18</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(b)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[ 1  2  3  4]
 [ 5 18  7  8]
 [ 9 10 11 12]]</code></pre>
</div>
</div>
<p>On peut également modifier des séries de nombres, voire des lignes/colonnes complètes, à condition d’assigner un élément de même taille.</p>
<div id="e67018f3" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> np.array([[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>], [<span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>], [<span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>]])</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>b[:, <span class="dv">2</span>] <span class="op">=</span> [<span class="op">-</span><span class="dv">1</span>, <span class="op">-</span><span class="dv">1</span>, <span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="20">
<pre><code>array([[ 1,  2, -1,  4],
       [ 5,  6, -1,  8],
       [ 9, 10, -1, 12]])</code></pre>
</div>
</div>
<p>Contrairement aux listes, on ne va généralement pas ajouter ou supprimer d’éléments à un <em>array</em>. La raison est que, comme indiqué précédemment, la taille d’un <em>array</em> est fixée à sa construction.</p>
<p>Si l’on souhaite faire grandir un <em>array</em>, on va généralement le faire à partir d’une liste – qui elle peut grandir – que l’on convertit ensuite en <em>array</em>.</p>
<p>Si l’on souhaite supprimer des éléments d’un <em>array</em>, on peut utiliser la syntaxe d’indexation étudiée dans la section précédente pour récupérer le sous-<em>array</em> qui nous intéresse, et assigner ce dernier à une nouvelle variable.</p>
</section>
<section id="masques-booléens" class="level4">
<h4 class="anchored" data-anchor-id="masques-booléens">Masques booléens</h4>
<p>Un gros avantage des <em>arrays</em> <code>NumPy</code> par rapport aux listes est qu’ils supportent les <strong>masques booléens</strong>, c’est à dire qu’on peut sélectionner des éléments d’un <em>array</em> en lui passant un <em>array</em> de même taille contenant des booléens.</p>
<div id="048ab5a8" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> np.array([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>])</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>a[[<span class="va">True</span>, <span class="va">True</span>, <span class="va">False</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="21">
<pre><code>array([1, 2])</code></pre>
</div>
</div>
<p>Cette propriété ouvre de nombreuses possibilités, dans la mesure où elle peut être combinée avec la propriété de vectorisation des <em>arrays</em>. Il devient ainsi très facile de <strong>sélectionner des éléments selon des conditions</strong>, même pour les <em>arrays</em> multidimensionnels.</p>
<div id="e156f041" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> np.array([[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>], [<span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>], [<span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>]])</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>cond <span class="op">=</span> (b <span class="op">&gt;</span> <span class="dv">6</span>) <span class="op">&amp;</span> (b <span class="op">!=</span> <span class="dv">10</span>)</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(cond)</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>()</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(b[cond])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[False False False False]
 [False False  True  True]
 [ True False  True  True]]

[ 7  8  9 11 12]</code></pre>
</div>
</div>
<p>Et l’on peut bien entendu exploiter ce mécanisme pour modifier des éléments selon une condition.</p>
<div id="23dee540" class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>b[cond] <span class="op">=</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(b)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[ 1  2  3  4]
 [ 5  6 -1 -1]
 [-1 10 -1 -1]]</code></pre>
</div>
</div>
<p>Ce dernier exemple illustre par ailleurs une propriété importante en <code>NumPy</code> appelée <strong><em>broadcasting</em></strong> : lorsque l’on remplace plusieurs éléments d’un <em>array</em> par un élément de taille 1 (et non un <em>array</em> de même taille), tous les éléments sont remplacés par cette valeur.</p>
</section>
</section>
<section id="opérations-mathématiques" class="level3">
<h3 class="anchored" data-anchor-id="opérations-mathématiques">Opérations mathématiques</h3>
<section id="arithmétique-sur-les-arrays" class="level4">
<h4 class="anchored" data-anchor-id="arithmétique-sur-les-arrays">Arithmétique sur les <em>arrays</em></h4>
<p>Tout au début de ce tutoriel, nous avons vu que multiplier deux <em>arrays</em> via l’opérateur <code>*</code> effectuait une multiplication termes à termes des deux <em>arrays</em>, et ce de manière vectorisée. Les opérations élémentaires (<code>+</code>, <code>-</code>, <code>*</code> et <code>/</code>) s’appliquent de la même manière aux <em>arrays</em> multidimensionnels.</p>
<div id="d80814dc" class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> np.array([[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>], [<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>]])</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> np.array([[<span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">1</span>], [<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">3</span>]])</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>a <span class="op">*</span> b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="24">
<pre><code>array([[3, 6, 2],
       [2, 6, 3]])</code></pre>
</div>
</div>
<p>Notons qu’on retrouve la propriété de <em>broadcasting</em> discutée dans la section précédente : lorsque l’on effectue une opération entre un <em>array</em> et un nombre de taille 1, l’opération est appliquée à chaque terme de l’<em>array</em>.</p>
<div id="c287c612" class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">*</span> <span class="dv">4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="25">
<pre><code>array([[4, 8, 8],
       [8, 8, 4]])</code></pre>
</div>
</div>
</section>
<section id="algèbre-linéaire" class="level4">
<h4 class="anchored" data-anchor-id="algèbre-linéaire">Algèbre linéaire</h4>
<p><code>NumPy</code> permet de réaliser simplement et de manière efficiente des opérations d’algèbre linéaire sur les <em>arrays</em>. L’ensemble des fonctions disponibles sont présentées dans la <a href="https://numpy.org/doc/stable/reference/routines.linalg.html">documentation officielle</a> (en Anglais).</p>
<p>Par exemple, l’opérateur <code>@</code> permet de réaliser une multiplication matricielle (et non plus termes à termes comme le fait <code>*</code>).</p>
<div id="34c70a69" class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> np.array([[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>], [<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>]])</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> np.array([[<span class="dv">2</span>, <span class="dv">3</span>], [<span class="dv">1</span>, <span class="dv">3</span>], [<span class="dv">3</span>, <span class="dv">1</span>]])</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>a <span class="op">@</span> b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="26">
<pre><code>array([[13, 12],
       [11, 16]])</code></pre>
</div>
</div>
</section>
<section id="fonctions-mathématiques" class="level4">
<h4 class="anchored" data-anchor-id="fonctions-mathématiques">Fonctions mathématiques</h4>
<p><code>NumPy</code> offre pléthore de fonctions <a href="https://numpy.org/doc/stable/reference/routines.math.html">mathématiques</a> et <a href="https://numpy.org/doc/stable/reference/routines.statistics.html">statistiques</a>, comme <code>sum</code>, <code>mean</code>, <code>min</code>, <code>round</code>, <code>log</code>, etc. Leur application à des objets unidimensionnels ne pose pas de problème particulier.</p>
<div id="2ffd000d" class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.log(<span class="dv">12</span>))</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>()</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.<span class="bu">min</span>([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]))</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>()</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.mean([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2.4849066497880004

1

2.0</code></pre>
</div>
</div>
<p>En revanche, dans le cas multidimensionnel, leur utilisation devient un peu plus subtile car on peut vouloir réaliser l’agrégation selon différentes dimensions. Si l’on ne spécifie rien, l’agrégation est effectuée sur tous les éléments de l’<em>array</em>.</p>
<div id="cfa3967f" class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> np.array([[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>], [<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>]])</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>np.<span class="bu">sum</span>(a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="28">
<pre><code>10</code></pre>
</div>
</div>
<p>Mais comment faire si l’on veut sommer par ligne ? Ou bien par colonne ? C’est là qu’intervient un élément crucial et assez complexe des fonctions de <code>NumPy</code> : le paramètre <code>axis</code>, qui spécifie la dimension selon laquelle est effectuée l’opération.</p>
<p>Lorsqu’il n’est pas spécifié comme dans l’exemple précédent, il prend la valeur <code>None</code> par défaut.</p>
<div id="8e6d2ba3" class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> np.array([[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>], [<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>]])</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>np.<span class="bu">sum</span>(a, axis<span class="op">=</span><span class="va">None</span>)  <span class="co"># idem que np.sum(a)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="29">
<pre><code>10</code></pre>
</div>
</div>
<p>La figure suivante permet de bien se représenter la manière dont fonctionnent les axes avec <code>NumPy</code>, afin de bien spécifier le sens attendu de l’agrégation.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/axes.png" class="img-fluid figure-img"></p>
<figcaption>axis</figcaption>
</figure>
</div>
<p>Ainsi, si l’on souhaite calculer la somme de chaque colonne par exemple, il faut agréger selon l’axe <span class="math inline">\(0\)</span>.</p>
<div id="df2d06df" class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> np.array([[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>], [<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>]])</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>np.<span class="bu">sum</span>(a, axis<span class="op">=</span><span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="30">
<pre><code>array([3, 4, 3])</code></pre>
</div>
</div>
<p>Et inversement pour obtenir les sommes de chaque ligne.</p>
<div id="7f677790" class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>np.<span class="bu">sum</span>(a, axis<span class="op">=</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="31">
<pre><code>array([5, 5])</code></pre>
</div>
</div>
<p>Enfin, notons que les fonctions mathématiques qui réalisent une agrégation sont généralement également disponibles comme <em>méthodes</em> d’un <em>array</em>. Elles fonctionnent de la même manière, au détail près qu’elles ne prennent pas l’<em>array</em> en argument dans la mesure où elles sont déjà “attachées” à celui-ci.</p>
<div id="9c557e14" class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>a.<span class="bu">sum</span>(axis<span class="op">=</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="32">
<pre><code>array([5, 5])</code></pre>
</div>
</div>
</section>
</section>
<section id="conclusion" class="level3">
<h3 class="anchored" data-anchor-id="conclusion">Conclusion</h3>
<p><code>NumPy</code> est la librairie quasi-standard de calcul scientifique en Python. Elle est à privilégier dès lors que vous souhaitez effectuer des opérations sur des données numériques, <em>a fortiori</em> lorsqu’il s’agit d’opérations vectorisées et/ou mobilisant des objets multidimensionnels comme des matrices.</p>
<p>Les possibilités offertes par <code>NumPy</code> sont gigantesques, et nous n’en avons vu qu’un aperçu. La <a href="https://numpy.org/doc/stable/user/">documentation officielle</a> présente l’ensemble de ces possibilités. Cette <a href="https://assets.datacamp.com/blog_assets/Numpy_Python_Cheat_Sheet.pdf"><em>cheat sheet</em></a> peut également s’avérer utile en cas d’oubli. Nous verrons également des fonctions supplémentaires à travers les exercices de fin de chapitre.</p>
</section>
</section>
<section id="exercices" class="level2">
<h2 class="anchored" data-anchor-id="exercices">Exercices</h2>
<section id="questions-de-compréhension" class="level3">
<h3 class="anchored" data-anchor-id="questions-de-compréhension">Questions de compréhension</h3>
<ul>
<li><p>1/ Quels sont les principaux avantages de <code>NumPy</code> ?</p></li>
<li><p>2/ Quelles sont les deux caractéristiques principales d’un <em>array</em> <code>NumPy</code> ?</p></li>
<li><p>3/ Que se passe-t-il si l’on essaie de définir un <em>array</em> contenant des objets de types hétérogènes ?</p></li>
<li><p>4/ Quelle est la principale méthode pour créer un <em>array</em> ?</p></li>
<li><p>5/ Quelles informations contient l’attribut <code>shape</code> d’un array ?</p></li>
<li><p>6/ Peut-on ajouter un élément à un <em>array</em> ? Supprimer un élément ?</p></li>
<li><p>7/ Qu’est-ce qu’un masque booléen et à quoi cela sert-il ?</p></li>
<li><p>8/ Qu’est-ce que la propriété de <em>broadcasting</em> ?</p></li>
<li><p>9/ A quoi sert le paramètre <code>axis</code> des fonctions mathématiques de <code>NumPy</code> ?</p></li>
</ul>
</section>
<section id="exercice-plusieurs-manières-de-créer-un-dataframe" class="level3">
<h3 class="anchored" data-anchor-id="exercice-plusieurs-manières-de-créer-un-dataframe">Exercice : plusieurs manières de créer un DataFrame</h3>
</section>
<section id="exercice-manipulations-simples-des-données-dun-dataframe" class="level3">
<h3 class="anchored" data-anchor-id="exercice-manipulations-simples-des-données-dun-dataframe">Exercice : manipulations simples des données d’un DataFrame</h3>
<p>Un vecteur comprenant les entiers compris entre 10 et 20 est défini dans la cellule suivante. En utilisant l’indexation des <em>arrays</em> <code>NumPy</code> :</p>
<ul>
<li><p>sélectionner les éléments aux positions 1, 3 et 4</p></li>
<li><p>sélectionner tous les éléments sauf le premier</p></li>
<li><p>sélectionner tous les éléments sauf le premier et le dernier</p></li>
<li><p>sélectionner les 3 premiers éléments</p></li>
<li><p>sélectionner les 5 derniers éléments</p></li>
<li><p>sélectionner tous les éléments pairs</p></li>
<li><p>sélectionner tous les éléments en les triant dans l’ordre inverse (NB : la fonction <code>np.flip</code> permet de faire la même chose)</p></li>
</ul>
<div id="4c551195" class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> np.arange(<span class="dv">10</span>, <span class="dv">21</span>)</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(X)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[10 11 12 13 14 15 16 17 18 19 20]</code></pre>
</div>
</div>
</section>
<section id="exercice-sélectionner-des-éléments-dans-une-matrice" class="level3">
<h3 class="anchored" data-anchor-id="exercice-sélectionner-des-éléments-dans-une-matrice">Exercice : sélectionner des éléments dans une matrice</h3>
<p>Une matrice de taille 5x5 comprenant tous les entiers compris entre 0 et 24 est définie dans la cellule suivante. En utilisant l’indexation des <em>arrays</em> <code>NumPy</code> :</p>
<ul>
<li><p>sélectionner la valeur <span class="math inline">\(19\)</span></p></li>
<li><p>sélectionner la 2ème ligne</p></li>
<li><p>sélectionner la 4ème colonne</p></li>
<li><p>sélectionner la sous-matrice 3x3 centrale</p></li>
<li><p>sélectionner les éléments diagonaux (NB : la fonction <code>np.diag</code> permet de réaliser la même opération de manière beaucoup plus simple)</p></li>
</ul>
<div id="c834237c" class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>Y <span class="op">=</span> np.arange(<span class="dv">0</span>, <span class="dv">25</span>).reshape((<span class="dv">5</span>, <span class="dv">5</span>))</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(Y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[ 0  1  2  3  4]
 [ 5  6  7  8  9]
 [10 11 12 13 14]
 [15 16 17 18 19]
 [20 21 22 23 24]]</code></pre>
</div>
</div>
</section>
<section id="exercice-un-peu-de-calcul" class="level3">
<h3 class="anchored" data-anchor-id="exercice-un-peu-de-calcul">Exercice : un peu de calcul</h3>
<p>Deux matrices carrées de taille 3x3 sont définies sous forme d’<em>arrays</em> <code>NumPy</code> dans la cellule suivante. A partir de ces matrices, réaliser les opérations mathématiques suivantes :</p>
<ul>
<li><p>multiplier tous les éléments de <code>X</code> par 3</p></li>
<li><p>diviser les éléments de <code>Y</code> par ceux de <code>X</code></p></li>
<li><p>passer tous les éléments de <code>Y</code> au <code>log</code></p></li>
<li><p>passer tous les éléments de <code>X</code> au carré</p></li>
<li><p>faire une multiplication matricielle de <code>X</code> et <code>Y</code></p></li>
<li><p>transposer la matrice <code>Y</code></p></li>
</ul>
<p>NB : vous pourrez trouver les fonctions nécessaires dans la <a href="https://numpy.org/doc/stable/reference/routines.math.html">documentation</a> ou via un moteur de recherche.</p>
<div id="08e910e4" class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> np.array([[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>],</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>              [<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>],</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>              [<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>]])</span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>Y <span class="op">=</span> np.array([[<span class="dv">10</span>,<span class="dv">11</span>,<span class="dv">12</span>],</span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a>              [<span class="dv">13</span>,<span class="dv">14</span>,<span class="dv">15</span>],</span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a>              [<span class="dv">16</span>,<span class="dv">17</span>,<span class="dv">18</span>]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="exercice-initialisation-darrays-de-diverses-natures" class="level3">
<h3 class="anchored" data-anchor-id="exercice-initialisation-darrays-de-diverses-natures">Exercice : initialisation d’<em>arrays</em> de diverses natures</h3>
<p>Dans le tutoriel, nous avons vu que la méthode standard pour créer un <em>array</em> <code>NumPy</code> consistait à initialiser une liste, que l’on convertit ensuite en <em>array</em>. On peut également utiliser des fonctions natives de <code>NumPy</code> qui créent des <em>array</em> d’une taille donnée, contenant des valeurs basiques (ex : valeurs “quasi-vides”, zéros, uns, une valeur spécifiée par l’utilisateur, etc.).</p>
<p>Par exemple, pour créer une matrice à 3 lignes et deux colonnes contenant des zéros, la syntaxe est :</p>
<div id="9c95838e" class="cell" data-execution_count="44">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>np.zeros((<span class="dv">3</span>, <span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="44">
<pre><code>array([[0., 0.],
       [0., 0.],
       [0., 0.]])</code></pre>
</div>
</div>
<p>En vous référant à la <a href="https://numpy.org/doc/stable/reference/routines.array-creation.html">documentation</a> de ces fonctions, générer :</p>
<ul>
<li><p>un vecteur (array à 1 dimension), contenant 18 fois la valeur <span class="math inline">\(1\)</span> (fonction <code>np.ones</code>)</p></li>
<li><p>un array à 3 dimensions, respectivement de tailles 2, 3 et 5, contenant uniquement des zéros (fonction <code>np.zeros</code>)</p></li>
<li><p>une matrice (array à 2 dimensions), à 4 lignes et 3 colonnes, contenant uniquement la valeur 5 (fonction <code>np.full</code>)</p></li>
<li><p>une matrice identité de taille 5, i.e.&nbsp;une matrice à 5 lignes et 5 colonnes, contenant des <span class="math inline">\(1\)</span> sur sa diagonale et des <span class="math inline">\(0\)</span> partout ailleurs (fonction <code>np.eye</code>)</p></li>
<li><p>un vecteur contenant les entiers compris entre <span class="math inline">\(0\)</span> à <span class="math inline">\(99\)</span> inclus (fonction <code>np.arange</code>)</p></li>
<li><p>un vecteur contenant les entiers <em>pairs</em> compris entre <span class="math inline">\(0\)</span> à <span class="math inline">\(99\)</span> inclus (fonction <code>np.arange</code>)</p></li>
<li><p>un vecteur contenant 5 valeurs uniformément espacées entre <span class="math inline">\(2\)</span> et <span class="math inline">\(3\)</span> inclus (fonction <code>np.linspace</code>)</p></li>
</ul>
</section>
<section id="exercice-tirage-dun-vecteur-selon-une-loi-normale" class="level3">
<h3 class="anchored" data-anchor-id="exercice-tirage-dun-vecteur-selon-une-loi-normale">Exercice : tirage d’un vecteur selon une loi normale</h3>
<p>En vous référant à la <a href="https://numpy.org/doc/stable/reference/random/generator.html">documentation</a> des fonctions de génération de nombres aléatoires de <code>NumPy</code>, générer un vecteur <code>X</code> de taille 10000, contenant des nombres tirés selon une loi normale de moyenne 0 et de variance 2.</p>
<p>Vérifiez ensuite à l’aide des fonctions mathématiques de <code>NumPy</code> que la moyenne et la variance de votre échantillon sont cohérents par rapport aux valeurs attendues.</p>
<p>Indice : attention à la manière dont est spécifiée la variance dans la fonction <code>NumPy</code> de génération d’une loi normale.</p>
</section>
<section id="exercice-tirage-dune-matrice-selon-une-loi-uniforme" class="level3">
<h3 class="anchored" data-anchor-id="exercice-tirage-dune-matrice-selon-une-loi-uniforme">Exercice : tirage d’une matrice selon une loi uniforme</h3>
<p>En vous référant à la <a href="https://numpy.org/doc/stable/reference/random/generator.html">documentation</a> des fonctions de génération de nombres aléatoires de <code>NumPy</code>, générer une matrice <code>U</code> de taille 1000 par 1000, contenant des nombres tirés selon une loi uniforme dans l’intervalle [-1, 1].</p>
<p>En utilisant la fonction <code>np.all</code> et un test booléen, vérifier que tous les nombres contenus dans <code>U</code> sont bien compris entre -1 et 1.</p>
</section>
<section id="exercice-binariser-une-matrice-de-nombres" class="level3">
<h3 class="anchored" data-anchor-id="exercice-binariser-une-matrice-de-nombres">Exercice : binariser une matrice de nombres</h3>
<p>On peut parfois avoir besoin de binariser une matrice numérique, c’est à dire de fixer un seuil au delà duquel les valeurs numériques sont fixées à 1, et à 0 en-dessous. <code>NumPy</code> propose plusieurs méthodes pour réaliser une telle opération, nous allons en voir deux.</p>
<p>Dans la cellule suivante, une matrice <code>X</code> à 6 lignes et 6 colonnes est générée, qui comprend des entiers aléatoirement choisis entre 0 et 49. Vous devez binariser cette matrice de deux manières différentes <strong>sans l’écraser</strong> (i.e.&nbsp;la matrice binaire doit être assignée à une autre variable que <code>X</code> et <code>X</code> ne doit pas être modifiée) :</p>
<ul>
<li><p>première méthode : en utilisant la fonction <code>np.zeros</code> et les masques booléens</p></li>
<li><p>seconde méthode : en utilisant la fonction <code>np.where</code> (cf.&nbsp;<a href="https://numpy.org/doc/stable/reference/generated/numpy.where.html">doc</a>)</p></li>
</ul>
<div id="ffd0c2cb" class="cell" data-execution_count="51">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> np.random.randint(<span class="dv">0</span>, <span class="dv">50</span>, size<span class="op">=</span>(<span class="dv">6</span>, <span class="dv">6</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="exercice-touché-coulé" class="level3">
<h3 class="anchored" data-anchor-id="exercice-touché-coulé">Exercice : touché-coulé</h3>
<p>L’objectif de cet exercice est de programmer seulement à l’aide d’objets et de fonctions de <code>NumPy</code> un touché-coulé très basique.</p>
<p>Une grille de 5x5 est définie dans la cellule suivante comme un <em>array</em>, les valeurs <span class="math inline">\(1\)</span> symbolisant la présence d’un bateau. Vous devez programmer une fonction <code>shoot</code> qui :</p>
<ul>
<li><p>prend en input une coordonnée <span class="math inline">\(x\)</span> (indice de la ligne) et une cordonnée <span class="math inline">\(y\)</span> (indice de la colonne)</p></li>
<li><p>teste si au moins une valeur <span class="math inline">\(1\)</span> est présente dans la grille :</p>
<ul>
<li><p>si oui :</p>
<ul>
<li><p>s’il y a un bateau à l’adresse (x, y), remplacer la valeur <span class="math inline">\(1\)</span> par <span class="math inline">\(2\)</span> et <code>print</code> “Touché !”</p></li>
<li><p>sinon, <code>print</code> “Raté !”</p></li>
</ul></li>
<li><p>si non :</p>
<ul>
<li><code>print</code> “Fin de partie !”</li>
</ul></li>
</ul></li>
</ul>
<p>Puis réalisez quelques tests pour vous assurer que votre fonction marche comme attendu.</p>
<div id="c4536868" class="cell" data-execution_count="54">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> np.array([[<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>], [<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>], [<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>],</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>              [<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>], [<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>]])</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(X)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1 1 1 0 0]
 [0 0 0 0 1]
 [1 0 0 0 1]
 [1 0 0 0 0]
 [0 1 1 1 1]]</code></pre>
</div>
</div>
</section>
<section id="exercice-one-hot-encoding" class="level3">
<h3 class="anchored" data-anchor-id="exercice-one-hot-encoding">Exercice : One Hot Encoding</h3>
<p>En statistique, il est fréquent de vouloir encoder numériquement un vecteur de catégories. Une manière fréquente d’encoder des catégories est le <em>one hot encoding</em> (OHE) : chaque valeur est représentée par un vecteur binaire, qui contient un <span class="math inline">\(1\)</span> sur la colonne correspondant à la catégorie et des <span class="math inline">\(0\)</span> partout ailleurs.</p>
<p>Dans la cellule suivante, on encode des PCS au format OHE grâce à une fonction du package <code>scikit-learn</code>. L’objectif de l’exercice est de reproduire cet encodage en utilisant uniquement des fonctions de la librairie <code>NumPy</code>.</p>
<p>Indice : on pourra utiliser les fonctions <code>np.unique</code>, <code>np.zeros</code> et <code>np.arange</code>.</p>
<div id="3e926c69" class="cell" data-execution_count="57">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> OneHotEncoder</span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>values <span class="op">=</span> np.array([<span class="st">"21"</span>, <span class="st">"46"</span>, <span class="st">"47"</span>, <span class="st">"23"</span>, <span class="st">"66"</span>, <span class="st">"82"</span>, <span class="st">"82"</span>])</span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(OneHotEncoder().fit_transform(values.reshape((<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>))).todense())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1. 0. 0. 0. 0. 0.]
 [0. 0. 1. 0. 0. 0.]
 [0. 0. 0. 1. 0. 0.]
 [0. 1. 0. 0. 0. 0.]
 [0. 0. 0. 0. 1. 0.]
 [0. 0. 0. 0. 0. 1.]
 [0. 0. 0. 0. 0. 1.]]</code></pre>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
      for (let i=0; i<annoteTargets.length; i++) {
        const annoteTarget = annoteTargets[i];
        const targetCell = annoteTarget.getAttribute("data-target-cell");
        const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
        const contentFn = () => {
          const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          if (content) {
            const tipContent = content.cloneNode(true);
            tipContent.classList.add("code-annotation-tip-content");
            return tipContent.outerHTML;
          }
        }
        const config = {
          allowHTML: true,
          content: contentFn,
          onShow: (instance) => {
            selectCodeLines(instance.reference);
            instance.reference.classList.add('code-annotation-active');
            window.tippy.hideAll();
          },
          onHide: (instance) => {
            unselectCodeLines();
            instance.reference.classList.remove('code-annotation-active');
          },
          maxWidth: 300,
          delay: [50, 0],
          duration: [200, 0],
          offset: [5, 10],
          arrow: true,
          appendTo: function(el) {
            return el.parentElement.parentElement.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto',
          placement: 'right',
          popperOptions: {
            modifiers: [
            {
              name: 'flip',
              options: {
                flipVariations: false, // true by default
                allowedAutoPlacements: ['right'],
                fallbackPlacements: ['right', 'top', 'top-start', 'top-end', 'bottom', 'bottom-start', 'bottom-end', 'left'],
              },
            },
            {
              name: 'preventOverflow',
              options: {
                mainAxis: false,
                altAxis: false
              }
            }
            ]        
          }      
        };
        window.tippy(annoteTarget, config); 
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>